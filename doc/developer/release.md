# Data Platform Release Process

This document contains notes to help streamline the process of creating a Data Platform release.


## complete development work

Edit pom.xml for dp-grpc, dp-service to reflect current version number!

### dp-service
- add comments to application.yml for any new contents

### dp-support
- add/modify scripts as needed


## update documentation
- dp-grpc
  - update README.md API docs
  - in-line comments in proto files
- dp-service
  - update README.md
  - update developer-notes.md and UML diagrams for any important new features / frameworks
  - update java command line docs for running new applications etc
  - update config docs
- dp-support
  - update README.md with new scripts etc
- data-platform
  - create release notes
  - update doc/install/quick-start.md, installation.md
  - update README.md
  - update release process (this doc)

Make sure this is all done before adding tags etc because it's a pain removing tags, deleting releases, adding tags, creating releases etc.


## merge changes from fork's development branch to upstream's main branch

### create pull requests to merge dev branch in fork to upstream

If working in a fork, create a github pull request to merge the development branch in the fork to the development branch in the upstream repo.

### create pull requests to merge dev branch in upstream to main branch in upstream

Create a pull request to merge the dev branch on the upstream to the main branch on the upstream.


## create git tags for release in upstream/main

Need to do this in the upstream for all repos: dp-grpc, dp-service, dp-desktop-app, data-platform. Change to the directory for upstream and use the script to create the tags.  Note that creating a "rel-" tag in the repos will automatically run the release workflow to create a release with the same name as the tag and publish artifacts appropriate for the repo.

The ~/dp/data-platform/scripts/tag-repos script can be used for this.

### tag for current release

These tags should only need to be added once for a release, unless they need to be "moved" (removed and added) to pick up new files.  This should be done in the main branch for the upstream repo.

- cd ~/dp/data-platform/scripts
- ./tag-repos rel-1.12.0

### steps for removing tags

The tag-repos script can be used to move an existing tag. If tags need to be (re)moved (this is unusual, for the releases anyway):

- git tag -d v1.12
- git push origin --delete v1.12


## edit github release docs for each repo

Need to do this in all repos: dp-grpc, dp-service, dp-desktop-app, data-platform.  The master release notes should be added to the data-platform repo release.  Minimally, edit the release notes for each of the other repos to point to the data-platform release notes.  The release for each repo should already contain the artifacts appropriate for that repo (as generated by the release workflow).
